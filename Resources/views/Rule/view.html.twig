{% extends 'OroUIBundle:actions:view.html.twig' %}
{% import 'OroUIBundle::macros.html.twig' as macros %}
{% import 'OroTagBundle::macros.html.twig' as _tag %}
{% import 'OroDataGridBundle::macros.html.twig' as dataGrid %}
{% import 'OroEmailBundle::macros.html.twig' as EA %}

{% oro_title_set({params : {"%branch.name%": entity.name|default('diamante.desk.common.not_available'|trans) }}) %}

{% block navButtons %}
    {% if resource_granted('CREATE', 'Entity:DiamanteDeskBundle:Ticket') %}
        {{ UI.button({
            'path': path('diamante_ticket_create', {'id': entity.id}),
            'iCss': 'icon-plus',
            'title': 'diamante.desk.ticket.actions.add'|trans,
            'label': 'diamante.desk.ticket.actions.add'|trans
        }) }}
    {% endif %}
    {% if resource_granted('EDIT', entity) %}
        {{ UI.button({
            'path': path('diamante_branch_update', {'id': entity.id}),
            'iCss': 'icon-edit',
            'title': 'diamante.desk.branch.actions.edit'|trans,
            'label': 'diamante.desk.ui.edit'|trans
        }) }}
    {% endif %}

    {% if resource_granted('DELETE', entity) %}
        {{ UI.deleteButton({
            'dataUrl': path('diamante_branch_delete', {'id': entity.id}),
            'dataRedirect': path('diamante_branch_list'),
            'aCss': 'no-hash remove-button',
            'dataId': entity.id,
            'id': 'btn-remove-account',
            'dataMessage': 'diamante.desk.branch.messages.delete.query'|trans,
            'successMessage': 'diamante.desk.branch.messages.delete.success'|trans,
            'title': 'diamante.desk.branch.actions.remove'|trans,
            'label': 'diamante.desk.ui.delete'|trans
            })
        }}
    {% endif %}
{% endblock navButtons %}

{% block pageHeader %}
    {% set breadcrumbs = {
            'entity': entity,
            'indexPath': path('diamante_branch_list'),
            'indexLabel': 'diamante.desk.branch.entity_plural_label'|trans,
            'entityTitle': entity.name|default('diamante.desk.common.not_available'|trans),
            'hasAvatar': true,
            'imagePath': null
        }
    %}
    {{ parent() }}
{% endblock pageHeader %}

{% block content_data %}
    {% set id = 'branchUpdate' %}

    {% set dataSubBlocks = [UI.attibuteRow('diamante.desk.forms.name'|trans, entity.name)] %}

    {% set dataBlocks =
        [{
            'title': 'diamante.desk.common.general'|trans,
            'class': 'active',
            'subblocks': [{
                'title': 'diamante.desk.branch.details'|trans,
                'data' : dataSubBlocks
            }]
        }]
    %}

    {% set data = {'dataBlocks': dataBlocks} %}
    {{ parent() }}
{% endblock content_data %}
