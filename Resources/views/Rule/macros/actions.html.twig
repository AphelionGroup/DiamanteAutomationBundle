{% macro renderEdit(form) %}
    <div class="control-group">
        <div id="action-block">
            <div id="list-action"></div>
            <ul style="list-style-type: none">
                <li><a id="add-rule-action" class="editable">Add new action</a></li>
            </ul>
            {{ form_row(form.actions) }}
        </div>
    </div>
{% endmacro %}

{% macro renderView() %}
    <div class="control-group">
        <div id="action-block">
            <div id="list-action"></div>
        </div>
    </div>
{% endmacro %}

{% macro renderTemplates(mode) %}
    <script type="text/template" id="item-action-view">
        <span class="editable"><%= actions[attrs.action].name %></span> notification by
        <span class="editable"><%= properties[attrs.property].name %></span> to
        <span class="editable"><%= values[attrs.value].name %></span>
    </script>

    <script type="text/template" id="item-action-edit">
        <div class="selector" style="width: 72px;">
            <span><%= actions[attrs.action].name %></span>
            <select data-property="action">
                <% _.each(actions, function(item, key) { %>
                <option
                <% if (attrs.action == key) { %> selected <% } %> value="<%= key %>"><%= item.name %></option>
                <%}) %>
            </select>
        </div>
        notification by
        <div class="selector" style="width: 72px;">
            <span><%= properties[attrs.property].name %></span>
            <select data-property="property">
                <% _.each(properties, function(item, key) { %>
                <option
                <% if (attrs.property == key) { %> selected <% } %> value="<%= key %>"><%= item.name %></option>
                <%}) %>
            </select>
        </div>
        to
        <div class="selector" style="width: 72px;">
            <span><%= values[attrs.value].name %></span>
            <select  data-property="value">
                <% _.each(values, function(item, key) { %>
                <option
                <% if (attrs.value == key) { %> selected <% } %> value="<%= key %>"><%= item.name %></option>
                <%}) %>
            </select>
        </div>
    </script>

    <script type="text/template" id="item-action">
        <div class="view-action"></div>

        <div class="edit-action x-hide"></div>

        {% if mode != 'view' %}
            <span class="delete editable">delete</span>
            <span class="save editable x-hide">save</span>
            <span class="edit editable">edit</span>
        {% endif %}
    </script>
{% endmacro %}