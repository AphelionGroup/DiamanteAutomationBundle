{% extends 'OroUIBundle:actions:update.html.twig' %}

{% set formAction = form.vars.value.rule ? path(updateAction, { 'id': form.vars.value.rule, 'type': type }) : path(createAction, {'type': type}) %}

{% block navButtons %}
    {% set cancel_url = path(listAction, {'type': type}) %}
    {{ UI.button({'path' : cancel_url, 'title' : 'diamante.automation.ui.cancel'|trans, 'label' : 'diamante.automation.ui.cancel'|trans}) }}
    {{ UI.saveAndStayButton() }}
    {{ UI.saveAndCloseButton() }}
{% endblock %}

{% block pageHeader %}
    {% if form.vars.value.rule %}
        {% set breadcrumbs = {
        'entity':      form.vars.value,
        'indexPath':   path(listAction, {'type': type}),
        'indexLabel':  'diamante.automation.rule.entity_plural_label'|trans,
        'entityTitle': form.vars.value.name|default('N/A'),
        'hasAvatar':   true,
        'imagePath':   null
        } %}
        {{ parent() }}
    {% else %}
        {% set title = 'oro.ui.create_entity'|trans({'%entityName%': 'diamante.automation.rule.entity_plural_label'|trans}) %}
        {% include 'OroUIBundle::page_title_block.html.twig' with { title: title } %}
    {% endif %}
{% endblock pageHeader %}

{% block content_data %}
    {% set id = 'automation-form' %}
    {% set options  = {
        view : "diamanteautomation/js/app/views/automation-view",
        options : config
    } %}
    <div class="diam-automation"
         data-page-component-module="oroui/js/app/components/view-component"
         data-page-component-options="{{ options|json_encode }}"></div>
{% endblock content_data %}